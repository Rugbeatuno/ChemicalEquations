#!/usr/bin/env node
const balance = require('./balance');

const equation = process.argv.slice(2).join(' ');

function displayUsage() {
  console.log(
    'Separate terms with `+` and use `->` to separate the reactants from the products. '
    + 'Capitalization matters.'
  );
}

// the equation was given via the command-line
if (equation) {
  if (!equation.includes('->')) {
    console.log('Type the whole equation in between double quotes ("").');
    displayUsage();
  }
  console.log(balance(equation).join(', '));
  process.exit(0);
}

const readline = require('readline');
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

function prompt(q) {
  return new Promise(resolve => {
    rl.question(q, answer => resolve(answer));
  });
}

async function main() {
  while (true) {
    const equation = await prompt('balance > ');
    if (!equation.includes('->')) {
      displayUsage();
    } else {
      console.log(balance(equation).join(', '));
    }
  }
}

main();
